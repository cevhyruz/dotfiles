#!/usr/bin/env bash

enable_color_support() {

  if [[ $COLORTERM == gnome-* && $TERM == xterm ]] \
    && infocmp gnome-256color &> /dev/null; then
    export TERM="gnome-256color"
  elif infocmp xterm-256color &> /dev/null; then
    export TERM="xterm-256color"
  fi

}

set_prompts() {

  local bold=""
  local reset=""

  local cyan=""
  local green=""
  local white=""
  local grey=""
  local pink=""

  if tput setaf 1 &> /dev/null; then
    tput sgr0; # reset colors

    bold=$(tput bold);
    reset=$(tput sgr0);

    cyan=$(tput setaf 37)
    green=$(tput setaf 41)
    white=$(tput setaf 15)
    grey=$(tput setaf 241)
    dimgrey=$(tput setaf 248)
    pink=$(tput setaf 216)

  fi

  PS1="\\n\\[${bold}\\]"
  PS1+="\\[${green}\\] ➜ "
  PS1+="\\[${white}\\]["                 # Open bracket.
  PS1+="\\[${grey}\\]\\u"                # Username.
  PS1+="\\[${white}\\]:"
  PS1+="\\[${grey}\\]\\h"                # Host
  PS1+="\\[${white}\\]] "                # close bracket
  PS1+="\\[${cyan}\\]\\W"                # Working directory
  PS1+="\\[${reset}\\]\\[${white}\\] $ \\[${pink}\\]"

  export PS1


  PS2="\\[${green}\\]   ➜  "
  PS2+="\\[${pink}\\]"

  export PS2

  trap 'echo -ne "${dimgrey}"' DEBUG
}

set_prompts

unset -f enable_color_support
unset -f set_prompts
